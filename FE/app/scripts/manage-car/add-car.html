<div class="" ng-controller="CarAddCtrl">

    <style>
        .page-title {
            text-align: center;
        }

        .add-car-box {
            width: 350px;
            margin: 0 auto;
            text-align: center;
        }
    </style>
    <div>Loading: {{model.loading}}</div>
    <div ng-if="(model.state!==states.added)">
        <button type="button" ng-click="goBack()">Back</button>
    </div>
    <section ng-if="(model.state===states.add)">
        <h2 class="page-title" ng-hide="model.notFounded">Add a car</h2>
        <h2 class="page-title" ng-show="model.notFounded">No car found for plate {{model.license}}</h2>
        <h4 class="page-title">Select your car below</h4>
        <fieldset ng-disabled="!model.available">
            <div class="add-car-box">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <select class="form-control"
                                    ng-required="required"
                                    ng-model="model.yearSelected"
                                    ng-options="item for item in model.years"
                                    ng-change="yearSelected()">
                                <option style="display:none" value="">Year</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select class="form-control"
                                    ng-required="required"
                                    ng-model="model.makeSelected"
                                    ng-options="item.name for item in model.makes track by item.id"
                                    ng-change="makeSelected()"
                                    ng-disabled="model.yearSelected===''">
                                <option style="display:none" value="">Make</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select class="form-control"
                                    ng-required="required"
                                    ng-model="model.modelSelected"
                                    ng-options="item.name for item in model.models track by item.id"
                                    ng-change="modelSelected()"
                                    ng-disabled="model.makeSelected===''">
                                <option style="display:none" value="">Model</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <input type="number" class="form-control" placeholder="Mileage"
                                   ng-required="required"
                                   min="0"
                                   maxlength="7"
                                   ng-model="model.mileage"
                                   ng-minlength="1"
                                   ng-maxlength="7"
                                   ng-disabled="!(model.available && model.mileageEnabled)">
                        </div>
                    </div>
                </div>

                <section ng-hide="model.notFounded">
                    <div>Or find by License Plate</div>
                    <div class="form-group">
                        <input type="text" style="text-transform: uppercase;" class="form-control" placeholder=""
                               ng-model="model.license">
                    </div>
                </section>

                <div>
                    <button type="button" class="btn btn-lg btn-success"
                            ng-disabled="!((model.mileage>=0 && model.mileage!=='') || (!model.notFounded && model.license.length > 0))"
                            ng-click="addCar()">
                        Add
                    </button>
                </div>
            </div>
        </fieldset>
    </section>
    <section ng-if="(model.state===states.found)">
        step found

        <button type="button" ng-click="selectCar()">ADD</button>
    </section>
    <section ng-if="(model.state===states.added)">
        <div>Great! We have added your car</div>
        <button type="button" ng-click="close()">Close</button>
    </section>
</div>
