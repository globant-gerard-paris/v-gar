"use strict";var _mainModules=["Services","Filters","Directives","ngRoute","ngResource","ngStorage","ngSanitize","ngCookies","ngAnimate","ngTouch","ngLocale","Error","Navigation","PresentationFlow"];angular.module("virtualGarage",_mainModules).config(["$routeProvider","$locationProvider",function(a,b){a.otherwise({redirectTo:"/landing"});var c=[];c.push({name:"/404",params:{templateUrl:"scripts/error/views/404.html",controller:"ErrorCtrl"}}),c.push({name:"/error",params:{templateUrl:"views/unexpected-error.html",controller:"ErrorCtrl"}}),c.push({name:"/landing",params:{templateUrl:"scripts/presentation-flow/views/landing.html",controller:"LandingCtrl"}}),c.push({name:"/add-car",params:{templateUrl:"scripts/presentation-flow/views/add-car.html",controller:"AddCarCtrl"}}),c.push({name:"/dashboard",params:{templateUrl:"scripts/presentation-flow/views/dashboard.html",controller:"DashboardCtrl"}}),c.push({name:"/linked-car",params:{templateUrl:"scripts/presentation-flow/views/linked-car.html",controller:"LinkedCarCtrl"}}),c.push({name:"/car-profile",params:{templateUrl:"scripts/presentation-flow/views/car-profile.html",controller:"CarProfileCtrl"}}),c.push({name:"/store-locator",params:{templateUrl:"scripts/presentation-flow/views/store-locator.html",controller:"StoreLocatorCtrl"}}),c.push({name:"/recalls",params:{templateUrl:"scripts/presentation-flow/views/recalls.html",controller:"RecallsCtrl"}}),c.push({name:"/services",params:{templateUrl:"scripts/presentation-flow/views/services.html",controller:"ServicesCtrl"}}),c.forEach(function(b){a.when(b.name,b.params)}),b.html5Mode(!0)}]),angular.module("AppConfig",[]).constant("config",{api:{hosts:{DEV:"http://127.0.0.1:9000",BACKEND:"http://127.0.0.1:8080",STAGE:"http://127.0.0.1:8080",PROD:"http://127.0.0.1:8080"},methods:{SYW_LOGIN:{use_host:"PROD",host_paths:{PROD:"/logint/prod"}}}}}),angular.module("Error",[]).config(function(){}),angular.module("Navigation",[]).config(function(){}),angular.module("PresentationFlow",["ui.bootstrap"]).config(function(){}),angular.module("Error").controller("ErrorCtrl",function(){}),angular.module("Navigation").controller("MainCtrl",function(){}),angular.module("PresentationFlow").directive("disableAnimation",["$animate",function(a){return{restrict:"A",link:function(b,c,d){d.$observe("disableAnimation",function(b){a.enabled(!b,c)})}}}]),angular.module("PresentationFlow").controller("LandingCtrl",["$scope","SessionDataSrv","RedirectSrv","$modal","LandingSrv",function(a,b,c,d,e){a.nextURL="/landing",a.slides=[{active:!0,"class":"carousel_img_LP_1"},{"class":"carousel_img_LP_2"},{"class":"carousel_img_LP_3"},{"class":"carousel_img_LP_4"},{"class":"carousel_img_LP_5"}];var f=function(){var c=b.getCurrentToken();c?(a.needSYWLogin=!1,e.getHomeSessionInfo(c).then(g,h)):a.needSYWLogin=!0};a.myInterval=5e3,a.needSYWLogin=!0,a.typeModal="",a.startNow=function(){a.needSYWLogin?(Platform.Authentication.openSignupDialog(null,null,"signIn"),a.needSYWLogin=!0):c.redirectTo(a.nextURL)};var g=function(b){b&&(b.haveManualCars||b.haveLinkedCars?a.nextURL="/dashboard":!b.haveNCDBCars||b.haveManualCars||b.haveLinkedCars?b.haveNCDBCars||b.haveManualCars||b.haveLinkedCars||(a.nextURL="/add-car"):a.nextURL="/linked-car")},h=function(a){console.log("ERROR: "+a)};f()}]),angular.module("PresentationFlow").controller("PresentationFlowCtrl",["$scope","PresentationFlowSrv","RedirectSrv",function(a,b,c){a.userTypeAction=function(a){b.setUserTypeAction(a),c.redirectTo("FULL_USER"===a?"/dashboard":"/presentation-flow-landing")}}]),angular.module("PresentationFlow").controller("AddCarCtrl",["$scope","RedirectSrv",function(a,b){a.addCarAction=function(){b.redirectTo("/dashboard")}}]),angular.module("PresentationFlow").controller("DashboardCtrl",["$scope","RedirectSrv",function(a,b){a.redirectToCarProfile=function(){b.redirectTo("/car-profile")},a.redirectToAddCar=function(){b.redirectTo("/add-car")},a.getToCarProfile=function(a){b.redirectTo("/car-profile?option="+a)}}]),angular.module("PresentationFlow").controller("LinkedCarCtrl",["$scope","RedirectSrv","LinkedCarSrv",function(a,b,c){a.areMineAction=function(){c.confirmCars(a.model.vehicules,function(){b.redirectTo("/dashboard")},function(a){console.log("ERROR: "+a),alert("Error, please try again.")})},a.addCarAction=function(){b.redirectTo("/add-car")},a.model={vehicules:[]},a.totalConfirmed=0,c.getLinkedCars(function(b){a.model.vehicules=b.data||[]},function(a){console.log("ERROR: "+a)}),a.$watch("model.vehicules",function(b){var c=0;angular.forEach(b,function(a){c+=a.isConfirmed?1:0}),a.totalConfirmed=c},!0)}]),angular.module("PresentationFlow").controller("CarProfileCtrl",["$scope","RedirectSrv","RecordSrv","RecallsSrv","TrendsSrv","$location",function(a,b,c,d,e,f){var g="2008",h="Ford",i="Edge",j=f.search();"2"===j.option&&(g="2010",h="Audi",i="A3"),a.model={records:[],option:j.option,lastRecall:!1,trend:!1,vehicle:{modelYear:g,make:h,model:i}},a.searchStore=function(a){b.redirectTo("/store-locator?zipcode="+(a||""))},a.viewRecalls=function(a){b.redirectTo("/recalls?option="+a)},a.$on("NEWLY_ADDED_RECORD",function(){k()}),a.$on("REMOVED_RECORD",function(){k()});var k=function(){d.getLastRecall(g,h,i,n,o),e.getTrend(h,p,q),c.getRecords().then(l,m)},l=function(b){a.model.records=b.data&&b.data.length>0?b.data:[]},m=function(b){console.log("ERROR: "+b),a.model.records=[]};a.redirectToDashboard=function(){b.redirectTo("/dashboard")};var n=function(b){a.model.lastRecall=b.data||!1},o=function(a){console.log("ERROR: "+a)},p=function(b){a.model.trend=b.data||!1},q=function(a){console.log("ERROR: "+a)};k()}]),angular.module("PresentationFlow").controller("StoreLocatorCtrl",["$scope","StoreLocatorSrv","$location","StringUtilSrv","Geocoder","$timeout",function(a,b,c,d,e,f){a.model={stores:[],address:null,isCollapsed:!0,myStore:null,myStoreId:null},a.$on("SET_FAVORITE_STORE_SUCCESS",function(){g()});var g=function(){var d=c.search();d&&d.zipcode&&(a.model.address=d.zipcode,b.getStoreNearby(a.model.address,h,i))},h=function(c){a.model.stores=c.data[0]||[],o(a.model.stores),b.getFavoriteStore(j,n)},i=function(a){console.log("ERROR: "+a)},j=function(c){if(c.data&&c.data.store){var g=c.data.store,h=p(g.id),i=d.remplaceCommaByPoints(g.latitude),j=d.remplaceCommaByPoints(g.longitude),m=b.getCurrentSearchLatitude(),n=b.getCurrentSearchLongitude(),o=e.calculateDistance(i,j,m,n);g.distance=o,k(m,n);var q=l(m,n,h);f(function(){a.model.myStore=c.data.store,a.model.stores=q})}},k=function(b,c){for(var d=0;d<a.model.stores.length;d++){var f=a.model.stores[d];f.distance=e.calculateDistance(b,c,f.latitude,f.longitude)}},l=function(a,b,c){for(var d=geolib.orderByDistance({latitude:a,longitude:b},c),e=[],f=0;f<d.length;f++){var g=d[f];e[f]=m(g.latitude,g.longitude)}return e},m=function(b,c){if(!b||!c)return null;for(var d=0;d<a.model.stores.length;d++){var e=a.model.stores[d];if(e.latitude===b.toString()&&e.longitude===c.toString())return e}},n=function(a){console.log("ERROR TO RETRIEVE STORE FAVORITE "+a)},o=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.latitude=d.remplaceCommaByPoints(c.latitude),c.longitude=d.remplaceCommaByPoints(c.longitude)}},p=function(b){for(var c=a.model.stores,d=[],e=0;e<c.length;e++){var f=c[e];f.id!==b&&d.push(f)}return d};a.getStoreNearby=function(){c.search("zipcode",a.model.address)},g()}]),angular.module("PresentationFlow").controller("RecordCtrl",["$scope","$modal","RecordSrv",function(a,b,c){a.model={dateRecordFormat:"MM/dd/yyyy",services:c.getRecordService()},a.openNewRecordForm=function(){var d=b.open({templateUrl:"modalNewRecord.html",controller:"ModalNewRecordCtrl",size:"md",resolve:{context:function(){return a.model}}});d.result.then(function(a){c.addRecord(a.recordForm).then(e,f)},function(){});var e=function(b){a.$emit("NEWLY_ADDED_RECORD",b)},f=function(a){alert("An error has occurred, please try again."),console.log("ERROR: "+a)}}}]).controller("ModalNewRecordCtrl",["$scope","$modalInstance","context",function(a,b,c){a.model=c,a.model.recordForm={mileage:null,date:null,source:null,comment:null,service:null},a.addRecord=function(){a.recordForm.$valid?b.close(a.model):a.recordForm.submitted=!0},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("PresentationFlow").controller("RecallsCtrl",["$scope","RedirectSrv","RecallsSrv","$location",function(a,b,c,d){a.model={recalls:[]},a.redirectToCarProfile=function(a){b.redirectTo("/car-profile?option="+a)},a.redirectToDashboard=function(){b.redirectTo("/dashboard")};var e=function(b){a.model.recalls=b.data||[]},f=function(a){console.log("ERROR: "+a)},g="2008",h="Ford",i="Edge",j=d.search();"2"===j.option&&(g="2010",h="Audi",i="A3"),a.model={option:j.option,recalls:[],vehicle:{modelYear:g,make:h,model:i}},c.getRecalls(g,h,i,e,f)}]),angular.module("PresentationFlow").controller("ServicesCtrl",["$scope","RedirectSrv","ServicesSrv","$http",function(a,b,c,d){a.model={services:[]};var e=!1,f=function(b){a.model.services=b.data||[],a.model.services=_.sortBy(a.model.services,function(a){return a.date}).reverse(),a.model.years=[],a.model.groupedServices=_.groupBy(a.model.services,function(b){var c=new Date(b.date),d=c.getFullYear();return a.model.years.push(d),d}),a.model.years=_.uniq(a.model.years).sort().reverse()},g=function(a){console.log("ERROR: "+a)},h="69925967",i="24503902";a.model={services:[],vehicle:{familyId:h,tangibleId:i}},e?d.get("resources/mocks/services.json").then(f,g):c.getServices(h,i,f,g)}]),angular.module("Services",["AppConfig"]).service("ConfigSrv",["config",function(a){var b=function(a,b){if(!a)throw"ConfigSrv ERROR: "+b},c=function(a,b){var c,d,e;return _.isString(b)&&!_.isEmpty(a)?-1===b.indexOf(".")?a[b]||void 0:(e=a,c=b,d=b.split("."),d.forEach(function(a){e&&(e=e[a]||void 0)}),e):void 0},d=function(b){return c(a,b)},e=function(a){var c=d("api.methods."+a);b(c,"api method "+a+" is not defined in api.methods");var e=c.use_host;b(e,"api method "+a+" use_host not defined");var f="";"LOCAL"!==e&&(f=d("api.hosts."+e),b(""===f||f,"api method "+a+" host name "+e+" is not defined in api.hosts"));var g=c.host_paths?c.host_paths[e]:!1;return b(g,"api method "+a+" path is not defined for host "+e),f+g};return{getConfig:d,getApiUrl:e}}]),angular.module("Services").service("RedirectSrv",["$location",function(a){var b=[],c=function(a){a!==_.last(b)&&b.push(a)},d=function(){return b},e=function(){var a=f(b);g(a,!0)},f=function(){return b.length>1?(b.pop(),b[b.length-1]):b[0]},g=function(a,b){b?h(a):i(a)},h=function(b){a.url(b)},i=function(b){c(b),a.url(b)},j=function(){c(a.path()),g("/404")},k=function(){c(a.path()),g("/error")};return{redirectTo:g,redirectToPrev:e,redirectTo404:j,redirectToErrorPage:k,getHistory:d}}]),angular.module("Services").factory("Geocoder",["$localStorage","$q","$timeout","$rootScope",function(a,b,c,d){var e=a.locations?JSON.parse(a.locations):{},f=[],g=250,h=function(){var b=f[0],i=new google.maps.Geocoder;i.geocode({address:b.address},function(i,j){if(j===google.maps.GeocoderStatus.OK){var k={lat:i[0].geometry.location.lat(),lng:i[0].geometry.location.lng(),formattedAddress:i[0].formatted_address};e[b.address]=k,a.locations=JSON.stringify(e),f.shift(),b.d.resolve(k)}else j===google.maps.GeocoderStatus.ZERO_RESULTS?(f.shift(),b.d.reject({type:"zero",message:"Zero results for geocoding address "+b.address})):j===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?b.executedAfterPause&&(f.shift(),b.d.reject({type:"busy",message:"Geocoding server is busy can not process address "+b.address})):j===google.maps.GeocoderStatus.REQUEST_DENIED?(f.shift(),b.d.reject({type:"denied",message:"Request denied for geocoding address "+b.address})):(f.shift(),b.d.reject({type:"invalid",message:"Invalid request for geocoding: status="+j+", address="+b.address}));if(f.length)if(j===google.maps.GeocoderStatus.OVER_QUERY_LIMIT){var l=f[0];l.executedAfterPause=!0,c(h,g)}else c(h,0);d.$$phase||d.$apply()})},i=function(a,b,c,d){var e=geolib.getDistance({latitude:a,longitude:b},{latitude:c,longitude:d});return geolib.convertUnit("mi",e,1)},j=function(a){var c=b.defer();return _.has(e,a)?c.resolve(e[a]):(f.push({address:a,d:c}),1===f.length&&h()),c.promise};return{calculateDistance:i,geocodeAddress:j}}]),function(){var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.prototype.getMonthName=function(){return b[this.getMonth()]},Date.prototype.getDayName=function(){return a[this.getDay()]},Date.prototype.getShortDayName=function(){return a[this.getDay()].substring(0,3).toUpperCase()},Date.prototype.getShortDayAndMonth=function(){return this.getMonth()+1+"/"+this.getDate()},Date.prototype.getFullDate=function(){return this.getShortDayName()+" "+this.getShortDayAndMonth()},Date.prototype.toDay=function(){function a(a){return 10>a?"0"+a:a}return[this.getFullYear(),a(this.getMonth()+1),a(this.getDate())].join("-")},Date.prototype.getDaysOfTheCurrentWeek=function(){var a,b=[],c=this.getFullYear(),d=this.getMonth(),e=this.getDate(),f={year:c,month:d,day:e};if(Date.isLeapYear(c)){var g=Date.today().set(f).last().monday();a=new Date(g)}else{var h=Date.today().set(f).last().monday();a=new Date(moment(h))}b[0]=a.getFullDate();for(var i=1;6>=i;i++){var j=new Date(moment(a.toDay()).add(i,"days"));b[i]=j.getFullDate()}return b}}(),angular.module("Services").service("ApiHttpSrv",["$http","ConfigSrv",function(a,b){var c=function(b,c,d,e,f){var g={"Content-Type":"application/json",Accept:"application/json"},h=angular.extend(g,e);return f&&_.each(f,function(b){delete a.defaults.headers.common[b],delete h[b]}),{method:b,url:c,data:d?d:"",cache:!1,headers:h}},d=function(b,d,e,f,g){var h=c(b,d,e,f,g);return a(h)},e=function(a,c,e,f,g,h){f&&(f=angular.isString(f)?f:$.param(f));var i=b.getApiUrl(c)+(f?"?"+f:"");return d(a,i,e,g,h)},f=function(a){return a.status&&a.status>=200&&a.status<=299};return{createHttp:d,createApiHttp:e,isSuccessResponse:f}}]),angular.module("Services").service("SessionDataSrv",function(){var a={currentUser:null,cachedVehicleUsers:null},b=function(){return window.vg.config.token},c=function(){return a.currentUser},d=function(b){a.currentUser=b},e=function(b){a.cachedVehicleUsers=b},f=function(){return a.cachedVehicleUsers},g=function(){return"1"},h=function(){return"1"};return{getCurrentUser:c,setCurrentUser:d,getCurrentFamilyId:g,getCurrentTangibleId:h,getCurrentToken:b,getCachedVehicleUsers:f,setCachedVehicleUsers:e}}),angular.module("Services").service("StringUtilSrv",function(){var a=function(a){return a?a.replace(/,/g,"."):a},b=function(a,b){return parseFloat(Math.round(100*a)/100).toFixed(b||1)},c=function(c){var d=b(String(c),6);return a(d)};return{remplaceCommaByPoints:a,formatDecimal:b,formatCoordsNumber:c}}),angular.module("PresentationFlow").service("PresentationFlowSrv",function(){var a="",b=function(){return a},c=function(b){a=b};return{getUserTypeAction:b,setUserTypeAction:c}}),angular.module("PresentationFlow").service("StoreLocatorSrv",["Geocoder","ApiHttpSrv","config","SessionDataSrv","StringUtilSrv",function(a,b,c,d,e){var f,g,h,i=8,j=1e3,k=function(d,e,f){var k=a.geocodeAddress(d);k.then(function(a){g=a.lat,h=a.lng,b.createHttp("GET",c.api.hosts.BACKEND+"/stores/lt/"+a.lat+"/lg/"+a.lng+"?limit="+i+"&distance="+j).then(e,f)},function(a){console.log(a),alert("An error has occurred, please try again.")})},l=function(a,e,g){f=a;var h=d.getCurrentUser();b.createHttp("PUT",c.api.hosts.BACKEND+"/user/"+h+"/store/"+a).then(e,g)},m=function(a,e){var f=d.getCurrentUser();b.createHttp("GET",c.api.hosts.BACKEND+"/user/"+f+"/store").then(a,e)},n=function(){return f},o=function(){return e.formatCoordsNumber(h)},p=function(){return e.formatCoordsNumber(g)};return{getStoreNearby:k,setFavoriteStore:l,getFavoriteStore:m,getCurrentFavoriteStoreId:n,getCurrentSearchLatitude:p,getCurrentSearchLongitude:o}}]),angular.module("PresentationFlow").service("RecordSrv",["ApiHttpSrv","SessionDataSrv","config",function(a,b,c){var d=function(){return[{id:"1",desc:"service 1"},{id:"2",desc:"service 2"},{id:"3",desc:"service 3"},{id:"4",desc:"service 4"},{id:"0",desc:"Other service"}]},e=function(d){return a.createHttp("POST",c.api.hosts.BACKEND+"/family/"+b.getCurrentFamilyId()+"/tangible/"+b.getCurrentTangibleId()+"/record",JSON.stringify(d))},f=function(d){return a.createHttp("DELETE",c.api.hosts.BACKEND+"/family/"+b.getCurrentFamilyId()+"/tangible/"+b.getCurrentTangibleId()+"/record/"+d)},g=function(){return a.createHttp("GET",c.api.hosts.BACKEND+"/family/"+b.getCurrentFamilyId()+"/tangible/"+b.getCurrentTangibleId()+"/records")};return{getRecordService:d,addRecord:e,getRecords:g,deleteRecord:f}}]),angular.module("PresentationFlow").service("RecallsSrv",["ApiHttpSrv","config",function(a,b){var c=function(c,d,e,f,g){a.createHttp("GET",b.api.hosts.BACKEND+"/vehicle/recalls/year/"+c+"/make/"+d+"/model/"+e+"/order/desc").then(f,g)},d=function(c,d,e,f,g){a.createHttp("GET",b.api.hosts.BACKEND+"/vehicle/recalls/year/"+c+"/make/"+d+"/model/"+e+"/last").then(f,g)};return{getRecalls:c,getLastRecall:d}}]),angular.module("PresentationFlow").service("TrendsSrv",["ApiHttpSrv","config",function(a,b){var c=function(c,d,e){a.createHttp("GET",b.api.hosts.BACKEND+"/vehicle/trends/make/"+c+"/last").then(d,e)};return{getTrend:c}}]),angular.module("PresentationFlow").service("LinkedCarSrv",["ApiHttpSrv","config","SessionDataSrv",function(a,b,c){var d=function(d,e){a.createHttp("GET",b.api.hosts.BACKEND+"/vehicle/vehicles/"+c.getCurrentUser()).then(d,e)},e=function(d,e,f){a.createHttp("POST",b.api.hosts.BACKEND+"/vehicle/vehicles/confirm/user/"+c.getCurrentUser(),d).then(e,f)};return{getLinkedCars:d,confirmCars:e}}]),angular.module("PresentationFlow").service("ServicesSrv",["ApiHttpSrv","config",function(a,b){var c=function(c,d,e,f){a.createHttp("GET",b.api.hosts.BACKEND+"/record/family/"+c+"/vehicle/"+d).then(e,f)};return{getServices:c}}]),angular.module("PresentationFlow").service("LandingSrv",["$q","SessionDataSrv","ApiHttpSrv","config",function(a,b,c,d){var e,f=function(b){return e=a.defer(),c.createHttp("GET",d.api.hosts.BACKEND+"/home/user/token/"+b).then(g,i),e.promise},g=function(a){var c={haveNCDBCars:!1,haveLinkedCars:!1,haveManualCars:!1},d=a.data.vehicleInformation;if(d){for(var f=0;f<d.length;f++){var g=d[f];c=h(c,g.status)}b.setCachedVehicleUsers(d),b.setCurrentUser(a.data.userId)}e.resolve(c)},h=function(a,b){return"NCDB"!==b||a.haveNCDBCars?"MANUAL"!==b||a.haveManualCars?"LINKED"!==b||a.haveLinkedCars?a:(a.haveLinkedCars=!0,a):(a.haveManualCars=!0,a):(a.haveNCDBCars=!0,a)},i=function(a){e.reject(a)};return{getHomeSessionInfo:f}}]),angular.module("Filters",[]).config(function(){}).filter("domain",function(){return function(a){var b,c="",d=/\w+:\/\/([\w|\.]+)/;return b=d.exec(a),null!==b&&(c=b[1]),c}}),angular.module("Directives",[]).config(function(){}),angular.module("Directives").directive("storeRow",["$timeout","StoreLocatorSrv","StringUtilSrv",function(a,b,c){return{restrict:"E",scope:{address:"=",districtName:"=",districtNumber:"=",city:"=",distance:"=",zipCode:"=",latitude:"=",longitude:"=",idStore:"=",mondayOpen:"=",mondayClose:"=",tuesdayOpen:"=",tuesdayClose:"=",wednesdayOpen:"=",wednesdayClose:"=",thursdayOpen:"=",thursdayClose:"=",fridayOpen:"=",fridayClose:"=",saturdayOpen:"=",saturdayClose:"=",sundayOpen:"=",sundayClose:"=",isFavoriteStore:"=",phone:"="},templateUrl:"scripts/directives/views/store-row.html",link:function(d){d.days=[];var e=0,f=function(){var a=new Date;d.days=a.getDaysOfTheCurrentWeek(),d.days[0]+=" "+d.mondayOpen+"am "+d.mondayClose+"pm",d.days[1]+=" "+d.tuesdayOpen+"am "+d.tuesdayClose+"pm",d.days[2]+=" "+d.wednesdayOpen+"am "+d.wednesdayClose+"pm",d.days[3]+=" "+d.thursdayOpen+"am "+d.thursdayClose+"pm",d.days[4]+=" "+d.fridayOpen+"am "+d.fridayClose+"pm",d.days[5]+=" "+d.saturdayOpen+"am "+d.saturdayClose+"pm",d.days[6]+=" "+d.sundayOpen+"am "+d.sundayClose+"pm",d.currentDate=a.getDay()===e?d.days[6]:d.days[a.getDay()-1]},g=new google.maps.LatLng(c.remplaceCommaByPoints(d.latitude),c.remplaceCommaByPoints(d.longitude)),h={center:g,coords:g,zoom:15};a(function(){var a=document.getElementById("map_canvas_"+d.idStore),b=new google.maps.Map(a,h),c=new google.maps.Marker({position:g,map:b,title:d.address});d.map=b,c.setMap(b)},500),d.formatMilesAway=function(a){return c.formatDecimal(a)},d.setFavoriteStore=function(){b.setFavoriteStore(d.idStore,i,j)};var i=function(a){d.$emit("SET_FAVORITE_STORE_SUCCESS",a)},j=function(a){console.log("ERROR: "+a)};d.redirectToStorePage=function(){},f()}}}]),angular.module("Directives").directive("recallInformation",function(){return{restrict:"E",templateUrl:"scripts/directives/views/recall-information.html",scope:{recallDate:"=",modelYear:"=",make:"=",model:"=",component:"=",summary:"=",consequence:"=",remedy:"=",notes:"=",position:"="},link:function(){}}}),angular.module("Directives").directive("serviceInformation",function(){return{restrict:"E",templateUrl:"scripts/directives/views/service-information.html",scope:{serviceDate:"=",serviceMileage:"=",serviceCenter:"=",serviceRecords:"="},link:function(a){null!==a.serviceCenter&&(a.serviceCenterStr=a.serviceCenter.address+" @ "+a.serviceCenter.city+", "+a.serviceCenter.zipCode);var b=[];_.each(a.serviceRecords,function(a){b.push(a.description)}),a.serviceDesc=b.join(", ")}}}),angular.module("Directives").directive("recordRow",["RecordSrv","$q","$modal",function(a,b,c){return{restrict:"E",scope:{record:"="},templateUrl:"scripts/directives/views/record-row.html",link:function(b){b.removeRecord=function(){d()};var d=function(){var d=c.open({templateUrl:"modalConfirmationDeleteRecord.html",controller:"ModalConfirmationDeleteCtrl",size:"md",resolve:{context:function(){}}});d.result.then(function(c){console.log(c),a.deleteRecord(b.record.id).then(e,f)},function(){})},e=function(a){b.$emit("REMOVED_RECORD",a)},f=function(a){console.log("ERROR "+a)}}}}]).controller("ModalConfirmationDeleteCtrl",["$scope","$modalInstance",function(a,b){a.ok=function(){b.close()},a.cancel=function(){b.dismiss()}}]),angular.module("Directives").directive("carConfirmation",function(){return{restrict:"E",scope:{vehicule:"=",totalConfirmed:"="},templateUrl:"scripts/directives/views/car-confirmation.html",link:function(a){a.selectVehicule=function(a){a.isConfirmed=!a.isConfirmed}},controller:function(){}}}),angular.module("Directives").directive("trendView",function(){return{restrict:"E",templateUrl:"scripts/directives/views/trend-view.html",scope:{trend:"="},link:function(){}}});